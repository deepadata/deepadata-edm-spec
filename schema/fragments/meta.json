{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://deepadata.com/schema/fragments/meta.json",
  "title": "DeepaData EDM v0.3 — Meta Fragment",
  "description": "Identity, consent, and provenance envelope for DeepaData emotional memory artifacts. Fragment is non-normative; canonical definition is in schema/edm.v0.3.schema.json.",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "version": {
      "type": "string",
      "const": "0.3",
      "description": "Schema version identifier."
    },
    "id": {
      "type": ["string", "null"],
      "format": "uuid",
      "description": "UUID for this memory/event."
    },
    "parent_id": {
      "type": ["string", "null"],
      "description": "Link to a parent or thread record."
    },
    "locale": {
      "type": ["string", "null"],
      "description": "BCP-47 language-region tag (e.g., en-au)."
    },
    "created_at": {
      "type": ["string", "null"],
      "format": "date-time",
      "description": "UTC ISO-8601 timestamp the record was created."
    },
    "updated_at": {
      "type": ["string", "null"],
      "format": "date-time",
      "description": "UTC ISO-8601 timestamp the record was last modified."
    },
    "owner_user_id": {
      "type": ["string", "null"],
      "description": "Internal user pointer (or null)."
    },
    "visibility": {
      "type": ["string", "null"],
      "enum": ["private", "shared_with_trusted", "organization", "public"],
      "description": "Access level for this artifact."
    },
    "pii_tier": {
      "type": ["string", "null"],
      "enum": ["none", "low", "moderate", "high", "restricted"],
      "description": "PII sensitivity classification."
    },
    "consent": {
      "type": ["object", "null"],
      "description": "User consent or legal basis metadata.",
      "additionalProperties": false,
      "properties": {
        "basis": {
          "type": ["string", "null"],
          "enum": ["contract", "consent", "legitimate_interest"],
          "description": "Legal basis."
        },
        "scope": { "type": ["string", "null"], "description": "Scope/limits of consent." },
        "captured_at": { "type": ["string", "null"], "format": "date-time", "description": "When consent was captured." },
        "revoked_at": { "type": ["string", "null"], "format": "date-time", "description": "When consent was revoked (if applicable)." }
      }
    },
    "tags": {
      "type": "array",
      "description": "Lowercase topical tokens.",
      "items": { "type": "string" }
    },
    "source": {
      "type": ["object", "null"],
      "description": "How and where the memory originated.",
      "additionalProperties": false,
      "properties": {
        "channel": {
          "type": ["string", "null"],
          "enum": ["chat", "document", "call", "app_event", "social", "manual"],
          "description": "Origin channel."
        },
        "app_client_id": { "type": ["string", "null"], "description": "Client/app identifier." },
        "message_id": { "type": ["string", "null"], "description": "Message/event pointer." },
        "media_format": {
          "type": ["string", "null"],
          "enum": ["text", "audio", "image", "video", "mixed"],
          "description": "Primary media format."
        },
        "attribution": { "type": ["string", "null"], "description": "Provenance string or URL." }
      }
    }
  },
  "required": ["version"],
  "$comment": "© 2025 DeepaData Pty Ltd — All Rights Reserved. Closed provenance pre-release. Fragment is informational; canonical contract lives in schema/edm.v0.3.schema.json."
}
