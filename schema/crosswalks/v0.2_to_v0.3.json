{
  "meta": {
    "source_version": "v0.2",
    "target_version": "v0.3",
    "last_updated": "2025-11-08",
    "provenance_refs": [
      "deepadata-v1 (EDM v0.1, 2025-04-20)",
      "deepadata-v2 (EDM v0.2 lineage, 2025-04-29)",
      "deepadata-v2 (Impulse layer, 2025-10-10)",
      "deepadata-edm-spec (v0.3 canonical schema)"
    ]
  },

  "mappings": {
    "unchanged": [
      "core.anchor",
      "core.spark",
      "core.wound",
      "core.fuel",
      "core.bridge",
      "core.echo",
      "core.narrative",

      "constellation.emotion_primary",
      "constellation.emotion_subtone",
      "constellation.identity_thread",
      "constellation.meaning_inference",
      "constellation.relational_perspective",
      "constellation.symbolic_anchor",
      "constellation.temporal_rhythm",
      "constellation.transcendent_moment",
      "constellation.narrative_arc",
      "constellation.temporal_context",
      "constellation.relational_dynamics",
      "constellation.memory_type",
      "constellation.archetype_energy",

      "milky_way.visibility_context",
      "milky_way.tone_shift",
      "milky_way.associated_people",
      "milky_way.location_context",
      "milky_way.media_context",
      "milky_way.memory_layers",

      "gravity.emotional_weight",
      "gravity.recall_triggers",
      "gravity.legacy_embed",
      "gravity.reentry_score",
      "gravity.tether_type",
      "gravity.tether_target",
      "gravity.strength_score",
      "gravity.emotional_density",
      "gravity.valence",
      "gravity.viscosity",
      "gravity.gravity_type",
      "gravity.temporal_decay",

      "gravity.nearby_themes",  /* keep as unchanged if present in your v0.2 */
      
      "meta.version",
      "meta.id",
      "meta.locale",
      "meta.created_at",
      "meta.updated_at",
      "meta.tags",
      "meta.source.channel",
      "meta.source.media_format"
    ],

    "renamed": [
      { "from": "impulse.visibility",   "to": "impulse.social_visibility" },
      { "from": "system.crosswalk_refs","to": "system.crosswalks" }
    ],

    "moved": [
      {
        "from": "governance.compliance_mask",
        "to": "gravity.compliance_mask",
        "transform": "string_or_flags → object{exportable:boolean, shareable:boolean, purpose_limited_to:string[]}"
      },
      {
        "from": "crosswalks.*",
        "to": "system.crosswalks.*",
        "transform": "flattened list → structured keys (plutchik_primary, geneva_emotion_wheel, DSM5_specifiers, HMD_v2_memory_type, ISO_27557_labels)"
      }
    ],

    "introduced": [
      /* Constellation additions in v0.3 */
      "constellation.higher_order_emotion",
      "constellation.meta_emotional_state",
      "constellation.interpersonal_affect",
      "constellation.active_motivational_state",

      /* Milky Way additions in v0.3 */
      "milky_way.event_type",
      "milky_way.time_range.start",
      "milky_way.time_range.end",

      /* Gravity additions in v0.3 */
      "gravity.entry_strength",
      "gravity.resilience_markers",
      "gravity.adaptation_trajectory",
      "gravity.reinforcement_pulses[]",
      "gravity.compliance_mask",

      /* Impulse block (new or expanded in v0.3) */
      "impulse.primary_energy",
      "impulse.drive_state",
      "impulse.motivational_orientation",
      "impulse.moral_valence",
      "impulse.temporal_focus",
      "impulse.directionality",
      "impulse.social_visibility",
      "impulse.urgency",
      "impulse.risk_posture",
      "impulse.agency_level",
      "impulse.regulation_state",
      "impulse.attachment_style",
      "impulse.coping_style",

      /* Governance extensions in v0.3 */
      "governance.jurisdiction",
      "governance.retention_policy.basis",
      "governance.retention_policy.ttl_days",
      "governance.retention_policy.on_expiry",
      "governance.subject_rights.portable",
      "governance.subject_rights.erasable",
      "governance.subject_rights.explainable",
      "governance.k_anonymity.k",
      "governance.k_anonymity.groups[]",

      /* Telemetry extensions in v0.3 */
      "telemetry.entry_confidence",
      "telemetry.extraction_model",
      "telemetry.extraction_notes",
      "telemetry.retrieval_stats.last_accessed_at",
      "telemetry.retrieval_stats.times_accessed",
      "telemetry.retrieval_stats.last_rank",
      "telemetry.retrieval_stats.avg_rank",
      "telemetry.feedback[]",

      /* System extensions in v0.3 */
      "system.embeddings[]",
      "system.indices.waypoint_ids[]",
      "system.indices.sector_weights.emotional",
      "system.indices.sector_weights.episodic",
      "system.indices.sector_weights.semantic",
      "system.indices.sector_weights.procedural",
      "system.indices.sector_weights.reflective",
      "system.crosswalks.plutchik_primary",
      "system.crosswalks.geneva_emotion_wheel",
      "system.crosswalks.DSM5_specifiers",
      "system.crosswalks.HMD_v2_memory_type",
      "system.crosswalks.ISO_27557_labels"
    ],

    "deprecated": [
      "system.embedding_id",
      "system.crosswalk_refs"
    ]
  },

  "notes": [
    "Milky Way fields explicitly confirmed unchanged in v0.2→v0.3: associated_people, location_context, media_context, memory_layers.",
    "Gravity fields explicitly confirmed unchanged in v0.2→v0.3: emotional_weight, recall_triggers, legacy_embed, reentry_score, tether_type, tether_target, strength_score, emotional_density, valence, viscosity, gravity_type, temporal_decay.",
    "core.narrative is unchanged across v0.2→v0.3 as per system-prompt-C.",
    "If your v0.2 also included gravity.nearby_themes, keep it as unchanged (left here for completeness). Remove from 'unchanged' if it truly did not exist in your v0.2 corpus.",
    "Where transforms are indicated, migration tooling should emit warnings when lossy mapping occurs.",
    "Arrays listed with [] denote plural collections introduced in v0.3 (e.g., reinforcement_pulses)."
  ]
}
